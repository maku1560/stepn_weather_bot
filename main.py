# STEPN Weather Bot v2025-08-10-11
# æ–¹è¨€ã¯â€œæœ€åˆã‹ã‚‰ç”¨æ„â€æ–¹å¼ï¼šå¤‰æ›ã›ãšã€æ–¹è¨€ã”ã¨ã®ã‚³ãƒ¡ãƒ³ãƒˆãƒ‘ãƒƒã‚¯ã‚’ç›´æ¥ä½¿ç”¨
# ç›´è¿‘3æ™‚é–“ã®å¤©æ°— + æ–¹è¨€åˆ¥ã‚³ãƒ¡ãƒ³ãƒˆ(å¤©æ°—Ã—æ°—æ¸© ä¸»æ–‡ 3ãƒãƒª) + æ™‚é–“å¸¯è¿½ã„ã‚³ãƒ¡ãƒ³ãƒˆ + AA
# å®‰å…¨åŒ–: æœªå®šç¾©ã¯æ–¹è¨€å†…/æ¨™æº–ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€ä¾‹å¤–æ™‚ã‚‚å¿…ãšè¿”ç­”

import os
import re
import random
from datetime import datetime, timedelta, timezone

# .envï¼ˆç„¡ãã¦ã‚‚å‹•ãï¼‰
try:
    from dotenv import load_dotenv
    load_dotenv()
except Exception:
    pass

import aiohttp
import discord
from discord import app_commands

# ---- Config ----
BOT_VERSION = "2025-08-10-11"
BOT_TOKEN = os.getenv("DISCORD_BOT_TOKEN")
JST = timezone(timedelta(hours=9))
USER_AGENT = f"STEPN-Weather-Bot/{BOT_VERSION} (contact: your-email@example.com)"

INTENTS = discord.Intents.default()
INTENTS.message_content = True

class WeatherBot(discord.Client):
    def __init__(self):
        super().__init__(intents=INTENTS)
        self.tree = app_commands.CommandTree(self)

    async def setup_hook(self):
        await self.tree.sync()

client = WeatherBot()

# ---------- Geocoding ----------
async def geocode(session: aiohttp.ClientSession, query: str):
    def pick_best(results: list[dict]) -> dict | None:
        if not results:
            return None
        cities = [r for r in results if r.get("admin1") and r.get("country")]
        if cities:
            cities.sort(key=lambda r: (r.get("population") or 0), reverse=True)
            return cities[0]
        return results[0]

    async def search(name: str):
        url = "https://geocoding-api.open-meteo.com/v1/search"
        params = {"name": name, "count": 10, "language": "ja", "format": "json"}
        headers = {"User-Agent": USER_AGENT}
        async with session.get(url, params=params, headers=headers, timeout=15) as resp:
            if resp.status != 200:
                return []
            data = await resp.json()
            return data.get("results", []) or []

    alias = {
        "USJ": "ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒ»ã‚¹ã‚¿ã‚¸ã‚ªãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³",
        "ãƒ¦ãƒ‹ãƒ": "ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒ»ã‚¹ã‚¿ã‚¸ã‚ªãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³",
        "ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼": "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰",
        "ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰": "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰",
        "ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼": "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼",
        "TDL": "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰",
        "TDS": "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼",
        "æ¢…ç”°": "å¤§é˜ªå¸‚ æ¢…ç”°",
        "ãªã‚“ã°": "å¤§é˜ªå¸‚ ãªã‚“ã°",
        "å¿ƒæ–æ©‹": "å¤§é˜ªå¸‚ å¿ƒæ–æ©‹",
        "é€šå¤©é–£": "å¤§é˜ªå¸‚ é€šå¤©é–£",
        "å¤©ç‹å¯º": "å¤§é˜ªå¸‚ å¤©ç‹å¯º",
        "ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼": "æ±äº¬ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼",
        "æ±äº¬é§…": "æ±äº¬é§…",
        "æµ…è‰": "å°æ±åŒº æµ…è‰",
        "ç§‹è‘‰åŸ": "åƒä»£ç”°åŒº ç§‹è‘‰åŸ",
        "æ¨ªæµœä¸­è¯è¡—": "æ¨ªæµœå¸‚ ä¸­åŒº",
    }
    romaji = {
        "å¤§é˜ª": "Osaka", "äº¬éƒ½": "Kyoto", "æœ­å¹Œ": "Sapporo", "åå¤å±‹": "Nagoya",
        "ç¦å²¡": "Fukuoka", "ç¥æˆ¸": "Kobe", "æ¨ªæµœ": "Yokohama", "ä»™å°": "Sendai",
        "åƒè‘‰": "Chiba", "å·å´": "Kawasaki", "ã•ã„ãŸã¾": "Saitama", "é‚£è¦‡": "Naha",
        "åºƒå³¶": "Hiroshima", "é‡‘æ²¢": "Kanazawa",
    }

    trials = [query]
    if query in alias:
        trials.append(alias[query])
    if not query.endswith(("å¸‚", "åŒº", "ç”º", "æ‘")) and len(query) <= 4:
        trials.append(query + "å¸‚")
    if query in romaji:
        trials.append(romaji[query])

    seen, uniq_trials = set(), []
    for t in trials:
        if t not in seen:
            uniq_trials.append(t); seen.add(t)

    for q in uniq_trials:
        results = await search(q)
        chosen = pick_best(results)
        if chosen:
            return {
                "name": chosen.get("name"),
                "latitude": chosen.get("latitude"),
                "longitude": chosen.get("longitude"),
                "country": chosen.get("country"),
                "admin1": chosen.get("admin1"),
                "timezone": chosen.get("timezone"),
            }
    return None

# ---------- Forecast ----------
async def fetch_forecast(session: aiohttp.ClientSession, lat: float, lon: float, tz: str):
    url = "https://api.open-meteo.com/v1/forecast"
    params = {
        "latitude": lat, "longitude": lon,
        "hourly": (
            "temperature_2m,precipitation_probability,precipitation,weathercode,"
            "windspeed_10m"
        ),
        "timezone": tz or "Asia/Tokyo"
    }
    headers = {"User-Agent": USER_AGENT}
    async with session.get(url, params=params, headers=headers, timeout=15) as resp:
        if resp.status != 200:
            return None
        return await resp.json()

# ---------- Emoji ----------
WEATHER_EMOJI = {
    0:"â˜€ï¸",1:"ğŸŒ¤ï¸",2:"â›…",3:"â˜ï¸",45:"ğŸŒ«ï¸",48:"ğŸŒ«ï¸",
    51:"ğŸŒ¦ï¸",53:"ğŸŒ¦ï¸",55:"ğŸŒ§ï¸",61:"ğŸŒ¦ï¸",63:"ğŸŒ§ï¸",65:"ğŸŒ§ï¸",66:"ğŸŒ§ï¸",67:"ğŸŒ§ï¸",
    71:"ğŸŒ¨ï¸",73:"ğŸŒ¨ï¸",75:"â„ï¸",77:"â„ï¸",80:"ğŸŒ§ï¸",81:"ğŸŒ§ï¸",82:"â›ˆï¸",
    85:"ğŸŒ¨ï¸",86:"ğŸŒ¨ï¸",95:"â›ˆï¸",96:"â›ˆï¸",99:"â›ˆï¸"
}
def pick_emoji(code:int)->str: return WEATHER_EMOJI.get(code,"ğŸŒ¡ï¸")

# ---- åˆ†é¡ï¼ˆå¤©æ°—Ã—æ°—æ¸©Ã—æ™‚é–“å¸¯ï¼‰ ----
def categorize_weather(rows):
    codes = [r["weathercode"] for r in rows]
    if any(c in (95,96,99) for c in codes):
        return "thunder"  # é›·ï¼ˆè¿½ã„ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿ã§æ‰±ã†ï¼šä¸»æ–‡ã¯ rain ã¨ä¼¼ã›ã‚‹ï¼‰
    if any(c in (71,73,75,77,85,86) for c in codes):
        return "snow"
    if any(c in (51,53,55,61,63,65,66,67,80,81,82) for c in codes):
        return "rain"
    if all(c in (0,1,2) for c in codes):
        return "sunny"
    return "cloudy"

def categorize_temp(rows):
    m = max(r["temp"] for r in rows)
    if m >= 30: return "hot"
    if m >= 20: return "warm"
    if m >= 10: return "cool"
    return "cold"

def categorize_time(rows):
    h = rows[0]["time"].hour
    if 5 <= h <= 9:  return "morning"
    if 10 <= h <= 15: return "day"
    if 16 <= h <= 18: return "evening"
    return "night"

# ---------- AA ----------
AA = ["|Ï‰ãƒ»)", "(/Ï‰ï¼¼)", "( Â´ â–½ ` )", "(ï¿£â–½ï¿£;)", "(ï½€ãƒ»Ï‰ãƒ»Â´)", "( Ë˜Ï‰Ë˜ )", "(ï½¡ï½¥Ï‰ï½¥ï½¡)", "(ï¼›ãƒ»âˆ€ãƒ»)", "(ãƒ»âˆ€ãƒ»)", "(>_<)"]
def maybe_aa(p=0.75):
    return (" " + random.choice(AA)) if random.random() < p else ""

def ensure_aa(s: str) -> str:
    if re.search(r"\(|\||ï¼", s):  # æ—¢ã«AAã‚‰ã—ãè¨˜å·ãŒã‚ã‚‹
        return s
    return s + maybe_aa()

# ---------- æ–¹è¨€ã‚­ãƒ¼ ----------
DIALECTS = ["kanto","kansai","tohoku","chugoku","kyushu"]

def pick_dialect_key(place: dict) -> str:
    pref = (place.get("admin1") or "").strip()
    if pref in ["å¤§é˜ªåºœ","äº¬éƒ½åºœ","å…µåº«çœŒ","æ»‹è³€çœŒ","å¥ˆè‰¯çœŒ","å’Œæ­Œå±±çœŒ"]:
        return "kansai"
    if pref in ["é’æ£®çœŒ","å²©æ‰‹çœŒ","å®®åŸçœŒ","ç§‹ç”°çœŒ","å±±å½¢çœŒ","ç¦å³¶çœŒ"]:
        return "tohoku"
    if pref in ["åºƒå³¶çœŒ","å²¡å±±çœŒ","å±±å£çœŒ","é³¥å–çœŒ","å³¶æ ¹çœŒ"]:
        return "chugoku"
    if pref in ["ç¦å²¡çœŒ","ä½è³€çœŒ","é•·å´çœŒ","ç†Šæœ¬çœŒ","å¤§åˆ†çœŒ","å®®å´çœŒ","é¹¿å…å³¶çœŒ"]:
        return "kyushu"
    # ãã‚Œä»¥å¤–ã¯ä¸­ç«‹ï¼ˆé–¢æ±ï¼‰
    return "kanto"

# ---------- ã‚³ãƒ¡ãƒ³ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆæ–¹è¨€åˆ¥ãƒ—ãƒªã‚»ãƒƒãƒˆï¼‰ ----------
class CommentEngine:
    def __init__(self):
        # ä¸»æ–‡ï¼šæ–¹è¨€â†’å¤©æ°—â†’æ°—æ¸©â†’ãƒãƒªã‚¨3
        self.base = self._build_bases()
        # è¿½ã„ã‚³ãƒ¡ãƒ³ãƒˆï¼šæ–¹è¨€â†’æ™‚é–“å¸¯â†’å€™è£œ
        self.tails = self._build_tails()
        # é›·ç”¨ã®è¿½åŠ å°¾
        self.thunder_tails = {
            "kanto": ["é›·ã«æ³¨æ„ã—ã¦ã€ç„¡ç†ã›ãšã­", "ç¨²å…‰ãŒè¦‹ãˆãŸã‚‰å±‹å†…ã«é¿é›£ã—ã‚ˆã†", "å®‰å…¨ç¬¬ä¸€ã§ã€è¨ˆç”»ã¯æŸ”è»Ÿã«"],
            "kansai": ["é›·ã¯è¦æ³¨æ„ã‚„ã€ç„¡ç†ã›ã‚“ã¨ãã‚„", "ãƒ”ã‚«ãƒƒã¨æ¥ãŸã‚‰å±‹å†…ã«é¿é›£ã—ã‚ˆ", "å®‰å…¨ç¬¬ä¸€ã§ã€äºˆå®šã¯æŸ”è»Ÿã«ã„ã“"],
            "tohoku": ["é›·æ°—ã‚’ã¤ã‘ã£ãºãª", "å…‰ã£ãŸã‚‰å±‹å†…ã•å…¥ã‚ã†", "ç„¡ç†ã›ãšå®‰å…¨ç¬¬ä¸€ã ã¹"],
            "chugoku": ["é›·ã«æ°—ãƒã¤ã‘ã‚“ã•ã„", "å…‰ã£ãŸã‚‰å±‹å†…ã¸é¿é›£ã—ã‚“ã•ã„", "å®‰å…¨ç¬¬ä¸€ã§ç„¡ç†ã¯ã›ã‚“ã®ã‚“ã‚ˆ"],
            "kyushu": ["é›·ã«ã¯æ°—ã‚’ã¤ã‘ã‚“ã­", "ãƒ”ã‚«ãƒƒã¨æ¥ãŸã‚‰å±‹å†…ã«é¿é›£ã—ã¨ã", "å®‰å…¨ç¬¬ä¸€ãŸã„"],
        }

    def get(self, dialect: str, weather: str, temp: str, timeband: str, has_thunder: bool) -> str:
        d = dialect if dialect in DIALECTS else "kanto"
        # 1) ä¸»æ–‡ï¼ˆæ–¹è¨€å†…â†’kantoã®é †ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
        text = self._pick_base(d, weather, temp)
        # 2) è¿½ã„ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆæ™‚é–“å¸¯ï¼‰
        tail = self._pick_tail(d, timeband)
        s = f"{text} {tail}".strip()
        # 3) é›·ãªã‚‰ä¸€è¨€è¿½åŠ 
        if has_thunder:
            s += " " + random.choice(self.thunder_tails[d])
        # 4) AAï¼ˆé‡è¤‡é˜²æ­¢ï¼‰
        return ensure_aa(s)

    # ---- å†…éƒ¨ ----
    def _pick_base(self, dialect: str, weather: str, temp: str) -> str:
        # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯é †ï¼šãã®æ–¹è¨€â†’kantoâ†’æœ€å¾Œã¯æ±ç”¨æ–‡
        for d in [dialect, "kanto"]:
            block = self.base.get(d, {}).get(weather, {}).get(temp, [])
            if block:
                return random.choice(block)
        # æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆçµ¶å¯¾ã«çŸ›ç›¾ã—ãªã„æ±ç”¨ï¼‰
        generic = {
            "sunny": "æ™´ã‚Œã¦ã‚‹ã‚ˆã€ä½“èª¿ã«åˆã‚ã›ã¦ç„¡ç†ãªãéã”ãã†",
            "cloudy": "é›²ãŒå¤šã‚ã€ã®ã‚“ã³ã‚Šã„ã“ã†",
            "rain": "é›¨ã®æ°—é…ã‚ã‚Šã€å‚˜ãŒã‚ã‚‹ã¨å®‰å¿ƒã ã‚ˆ",
            "snow": "é›ªã®å¯èƒ½æ€§ã‚ã‚Šã€è¶³å…ƒã«æ³¨æ„ã—ã¦ã­",
        }
        return generic.get(weather, "ä»Šæ—¥ã¯ç©ã‚„ã‹ã«ã„ã“ã†")

    def _pick_tail(self, dialect: str, timeband: str) -> str:
        for d in [dialect, "kanto"]:
            block = self.tails.get(d, {}).get(timeband, [])
            if block:
                return random.choice(block)
        # æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        return {"morning":"æœã¯ã‚†ã£ãã‚Šæº–å‚™ã—ã‚ˆã†",
                "day":"æ—¥ä¸­ã¯ã“ã¾ã‚ã«ä¼‘æ†©ã­",
                "evening":"å¤•æ–¹ã¯æ—©ã‚ã«åˆ‡ã‚Šä¸Šã’ã‚ˆã†",
                "night":"å¤œã¯å®‰å…¨ç¬¬ä¸€ã§ã­"}.get(timeband, "")

    def _build_bases(self):
        # çŸ­ã‚ãƒ»è‡ªç„¶ãƒ»çŸ›ç›¾ãªã—ã€‚å„3ãƒãƒªã€‚
        # weather: sunny/cloudy/rain/snow
        # temp: hot/warm/cool/cold
        return {
            "kanto": {
                "sunny": {
                    "hot": [
                        "å¼·ã„æ—¥å·®ã—ã§æš‘ã„ã­ã€æ°´åˆ†ã¨æ—¥é™°ä¼‘æ†©ã‚’å¿˜ã‚Œãšã«",
                        "ã‹ãªã‚Šæš‘ã„ã‚ˆã€å¸½å­ã¨æ—¥ç„¼ã‘å¯¾ç­–ã‚‚ã—ã£ã‹ã‚Šã­",
                        "æš‘ã•ãŒå³ã—ã„ã‹ã‚‰ã€ç„¡ç†ã›ãšæ¶¼ã—ã„å ´æ‰€ã‚’ä½¿ãŠã†",
                    ],
                    "warm": [
                        "éã”ã—ã‚„ã™ã„æ™´ã‚Œã€å¤–ã®ç”¨äº‹ãŒã¯ã‹ã©ã‚Šãã†",
                        "ç©ã‚„ã‹ãªé™½æ°—ã ã­ã€æ´—æ¿¯ã‚„æ•£æ­©ã«ã¡ã‚‡ã†ã©ã„ã„",
                        "å¿ƒåœ°ã‚ˆã„æ™´ã‚Œã€å‹•ããªã‚‰ä»ŠãŒã„ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ™´ã‚Œã€è–„æ‰‹ã®ä¸Šç€ãŒã‚ã‚‹ã¨å®‰å¿ƒ",
                        "ç©ºæ°—ã¯æ¶¼ã—ã‚ã€ä½“ã‚’å†·ã‚„ã—ã™ããªã„ã‚ˆã†ã«ã­",
                        "æ—¥å·®ã—ã¯ã‚ã‚‹ã‘ã©ä½“æ„Ÿã¯ä½ã‚ã€æœè£…ã§èª¿æ•´ã—ã‚ˆã†",
                    ],
                    "cold": [
                        "å¿«æ™´ã§ã‚‚å†·ãˆã‚‹ã‚ˆã€æ‰‹è¢‹ã‚„ãƒãƒ•ãƒ©ãƒ¼ãŒå½¹ç«‹ã¤",
                        "ç©ºæ°—ãŒå†·ãŸã„ã€é‡ã­ç€ã§æ¸©ã‹ãã—ã¦ã„ã“ã†",
                        "æ”¾å°„å†·å´ã§å†·ãˆè¾¼ã¿ã‚„ã™ã„ã€æ²¹æ–­ã—ãªã„ã§ã­",
                    ],
                },
                "cloudy": {
                    "hot": [
                        "é›²ã¯å¤šã„ã‘ã©è’¸ã—æš‘ã„ã€ã“ã¾ã‚ã«æ°´åˆ†ã‚’",
                        "è’¸ã—æš‘ã•ãŒæ®‹ã‚‹ã­ã€é¢¨é€šã—ã®è‰¯ã„æœè£…ã§",
                        "æ—¥å·®ã—ã¯å¼±ã‚ã§ã‚‚æš‘ã„ã‚ˆã€ç„¡ç†ã¯ã—ãªã„ã§",
                    ],
                    "warm": [
                        "é›²å¤šã‚ã§å‹•ãã‚„ã™ã„ã€å±‹å¤–ä½œæ¥­ã‚‚è² æ‹…å°‘ãªã‚",
                        "ç†±ãŒã“ã‚‚ã‚Šã«ããã¦å¿«é©ã€ä»Šã®ã†ã¡ã«ç”¨äº‹ã‚’é€²ã‚ã‚ˆã†",
                        "ç©ã‚„ã‹ãªæ›‡ã‚Šã€å¤–å›ã‚Šã‚‚ã—ã‚„ã™ã„ã­",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ›‡ã‚Šã€ç¾½ç¹”ãŒä¸€æšã‚ã‚‹ã¨ã¡ã‚‡ã†ã©ã„ã„",
                        "ä½“æ„Ÿã¯ä½ã‚ã€é¦–å…ƒã‚’æ¸©ã‚ã‚‹ã¨æ¥½ã ã‚ˆ",
                        "æ—¥å·®ã—ãŒãªã„åˆ†å†·ãˆã‚‹ã€é•·å±…ã¯ã»ã©ã»ã©ã«",
                    ],
                    "cold": [
                        "æ›‡ã‚Šã§å†·ãˆã‚‹ã­ã€åšæ‰‹ã®ä¸Šç€ã§ã—ã£ã‹ã‚Šé˜²å¯’",
                        "åº•å†·ãˆã—ãã†ã€æ¸©ã‹ã„é£²ã¿ç‰©ã§ä½“ã‚’å®ˆã‚ã†",
                        "æš—ããªã‚‹ã¨ä¸€æ®µã¨å¯’ã„ã€æ—©ã‚ã«å¸°ã‚‹ã®ãŒå®‰å¿ƒ",
                    ],
                },
                "rain": {
                    "hot": [
                        "è’¸ã—æš‘ã„é›¨ã€é€šæ°—æ€§ã®è‰¯ã„ãƒ¬ã‚¤ãƒ³ã‚¦ã‚§ã‚¢ãŒæ¥½ã ã‚ˆ",
                        "æ±—ã¨é›¨ã§å†·ãˆã‚„ã™ã„ã€ã‚¿ã‚ªãƒ«ã‚„æ›¿ãˆã®ã‚·ãƒ£ãƒ„ãŒã‚ã‚‹ã¨å®‰å¿ƒ",
                        "å°é›¨ã®åˆé–“ã‚’ã†ã¾ãä½¿ã£ã¦å‹•ã“ã†",
                    ],
                    "warm": [
                        "é›¨ã§ã‚‚æ°—æ¸©ã¯é«˜ã‚ã€ãƒ ãƒ¬å¯¾ç­–ã‚’ã—ã¦ã„ã“ã†",
                        "è·ç‰©ã¯æ’¥æ°´ã ã¨å®‰å¿ƒã€å‚˜ã¯å¿˜ã‚Œãšã«ã­",
                        "å‡ºå…¥ã‚Šã§ãƒ ãƒ¯ãƒƒã¨ã™ã‚‹ã‹ã‚‰ã€ä½“èª¿ã«æ°—ã‚’ã¤ã‘ã¦",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šé›¨ã€å‚˜ã¯å¿…é ˆã ã‚ˆ",
                        "æ¿¡ã‚Œã‚‹ã¨ä½“ãŒå†·ãˆã‚‹ã€ã‚¿ã‚ªãƒ«ã‚’ä¸€æšæŒã£ã¦ãŠã“ã†",
                        "å±‹å†…ã«é€ƒã’å ´ã‚’ä½œã£ã¦ãŠãã¨æ¥½ã ã‚ˆ",
                    ],
                    "cold": [
                        "å†·ãŸã„é›¨ã€æ‰‹è¢‹ã‚„é˜²æ°´ã®é´ãŒå½¹ç«‹ã¤ã‚ˆ",
                        "ä½“æ¸©ã‚’å¥ªã‚ã‚Œã‚„ã™ã„ã€ç„¡ç†ã›ãšã«ã„ã“ã†",
                        "é¢¨ãŒå¼·ã„ã¨ãã¯åˆç¾½ãŒã‚ã‚‹ã¨å¿«é©ã•ãŒé•ã†",
                    ],
                },
                "snow": {
                    "hot": [
                        "çã—ã„é›ªã®æ¡ä»¶ã ã­ã€è¶³å…ƒæœ€å„ªå…ˆã§ã„ã“ã†",
                        "æ°—æ¸©ã¯é«˜ã‚ã§ã‚‚é›ªã«ã¯æ³¨æ„ã€ç„¡ç†ã¯ã—ãªã„ã§",
                        "çŠ¶æ³ãŒå¤‰ã‚ã‚Šã‚„ã™ã„ã€æ…é‡ã«å‹•ã“ã†",
                    ],
                    "warm": [
                        "ã¿ãã‚Œæ°—å‘³ã§è¶³å…ƒãŒæ‚ªã„ã€æ°´ã¯ã­ã«æ³¨æ„ã—ã‚ˆã†",
                        "è§£ã‘ã‹ã‘ã§æ»‘ã‚Šã‚„ã™ã„ã€æ­©å¹…ã¯å°ã•ã‚ã«",
                        "æ¿¡ã‚Œå†·ãˆã—ã‚„ã™ã„ã‹ã‚‰ã€ä½“æ¸©ç®¡ç†ã‚’å¿˜ã‚Œãšã«",
                    ],
                    "cool": [
                        "å°é›ªã§ã²ã‚“ã‚„ã‚Šã€è¶³å…ƒã«æ°—ã‚’ã¤ã‘ã‚ˆã†",
                        "è¦–ç•ŒãŒç™½ã£ã½ã„ã€æ¨ªæ–­ã¯æ…é‡ã«ã­",
                        "æ¿¡ã‚ŒãŸé´ã¯å†·ãˆã‚‹ã€æ›¿ãˆã®é´ä¸‹ãŒã‚ã‚‹ã¨å®‰å¿ƒ",
                    ],
                    "cold": [
                        "å‡çµãŒå¿ƒé…ã€æ™‚é–“ã«ä½™è£•ã‚’æŒã£ã¦å‹•ã“ã†",
                        "è»¢å€’ã«æ³¨æ„ã€æ‰‹è¢‹ã¨æ»‘ã‚Šã«ãã„é´ã§",
                        "æ—¥æ²¡å¾Œã¯å±é™ºåº¦ã‚¢ãƒƒãƒ—ã€å¯„ã‚Šé“ã¯æ§ãˆã‚ã«",
                    ],
                },
            },

            "kansai": {
                "sunny": {
                    "hot": [
                        "ãˆã‚‰ã„æš‘ã„ã‚ã€æ°´åˆ†ã¨æ—¥é™°ä¼‘æ†©ã¯å¿˜ã‚Œã‚“ã¨ãã‚„",
                        "ã‚®ãƒ©ã‚®ãƒ©ã‚„ã§ã€å¸½å­ã¨æ—¥ç„¼ã‘æ­¢ã‚ã‚‚ã—ã£ã‹ã‚Šãª",
                        "ç„¡ç†ã›ã‚“ã¨ã€æ¶¼ã—ã„ã¨ã“ä¸Šæ‰‹ã«ä½¿ã£ã¦ã“",
                    ],
                    "warm": [
                        "ãˆãˆæ™´ã‚Œã‚„ã€å¤–ã®ç”¨äº‹ã‚µã‚¯ãƒƒã¨ç‰‡ä»˜ã‘ã‚ˆã‹",
                        "å¿ƒåœ°ã‚ˆã„é™½æ°—ã‚„ãªã€æ´—æ¿¯æ—¥å’Œã‚„ã§",
                        "å‹•ããªã‚‰ä»ŠãŒãˆãˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚„",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ™´ã‚Œã‚„ã€è–„æ‰‹ã®ä¸Šç€ã‚ã‚‹ã¨å®‰å¿ƒã‚„ã§",
                        "æ—¥å·®ã—ã¯ã‚ã£ã¦ã‚‚ä½“æ„Ÿã¯ä½ã‚ã€æœã§èª¿æ•´ã—ã‚ˆ",
                        "æœæ™©ã¯å†·ãˆã‚‹ã—ã€æ²¹æ–­ã›ã‚“ã¨ã„ã¦ãª",
                    ],
                    "cold": [
                        "å¿«æ™´ã§ã‚‚å†·ãˆã‚‹ã‚ã€æ‰‹è¢‹ã‚„ãƒãƒ•ãƒ©ãƒ¼ç”¨æ„ã—ã¨ã",
                        "ç©ºæ°—ãã‚“ã¨å†·ãŸã„ã€é‡ã­ç€ã§ã¬ãã¬ãã„ã“",
                        "æ”¾å°„å†·å´ã§å†·ãˆè¾¼ã¿ã‚„ã™ã„ã•ã‹ã„ã€è¦æ³¨æ„ã‚„",
                    ],
                },
                "cloudy": {
                    "hot": [
                        "æ›‡ã£ã¦ã¦ã‚‚è’¸ã—æš‘ã„ã‚ã€ã“ã¾ã‚ã«æ°´åˆ†ãª",
                        "æ—¥å·®ã—å¼±ã‚ã§ã‚‚æš‘ã„ã§ã€ç„¡ç†ã¯ç¦ç‰©ã‚„",
                        "é¢¨é€šã—ã®ãˆãˆæœã§ã„ã“ã‹",
                    ],
                    "warm": [
                        "é›²å¤šã‚ã§å‹•ãã‚„ã™ã„ã€ä»Šã®ã†ã¡ã«ç”¨äº‹ã‚„ã£ã¦ã¾ãŠ",
                        "ç†±ã“ã‚‚ã‚Šã«ããã¦å¿«é©ã‚„ã€å¤–å›ã‚Šã‚‚ã—ã‚„ã™ã„ã§",
                        "ãˆãˆæ„Ÿã˜ã®æ›‡ã‚Šã‚„ãªã€ã‚µã‚¯ã‚µã‚¯å‹•ã‘ãã†ã‚„",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ›‡ã‚Šã€ç¾½ç¹”ä¸€æšã‚ã‚‹ã¨æ¥½ã‚„ã§",
                        "æ—¥å·®ã—ãªã„ã¶ã‚“å†·ãˆã‚‹ã€é¦–å…ƒã‚ã£ãŸã‚ã‚ˆ",
                        "é•·å±…ã¯ã»ã©ã»ã©ã«ã—ã¨ã“",
                    ],
                    "cold": [
                        "æ›‡ã‚Šã§åº•å†·ãˆã™ã‚‹ã§ã€åšã‚ã®ä¸Šç€ã§ã„ã“",
                        "æ¸©ã‹ã„é£²ã¿ã‚‚ã‚“ã§ä½“å®ˆã£ã¨ã“ãª",
                        "æš—ãªã‚‹ã¨ä¸€æ®µã¨å¯’ã„ã€æ—©ã‚ã«å¸°ã‚‹ã‚“ãŒå®‰å¿ƒã‚„",
                    ],
                },
                "rain": {
                    "hot": [
                        "è’¸ã—é›¨ã‚„ã€é€šæ°—æ€§ãˆãˆãƒ¬ã‚¤ãƒ³ã‚¦ã‚§ã‚¢ãŒæ¥½ã‚„ã§",
                        "æ±—ã¨é›¨ã§å†·ãˆã‚„ã™ã„ã—ã€ã‚¿ã‚ªãƒ«ã¨æ›¿ãˆã‚·ãƒ£ãƒ„ç”¨æ„ãª",
                        "å°é›¨ã®åˆé–“ã†ã¾ãä½¿ã£ã¦å‹•ã“",
                    ],
                    "warm": [
                        "é›¨ã§ã‚‚æ°—æ¸©ã¯é«˜ã‚ã€ãƒ ãƒ¬å¯¾ç­–å¿˜ã‚Œã‚“ã¨ã„ã¦",
                        "è·ç‰©ã¯æ’¥æ°´ãŒå®‰å¿ƒã‚„ã€å‚˜ã‚‚å¿˜ã‚Œãšã«ãª",
                        "å‡ºå…¥ã‚Šã§ãƒ ãƒ¯ãƒƒã¨æ¥ã‚‹ã—ã€ä½“èª¿æ°—ãƒã¤ã‘ã¦ãª",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šé›¨ã‚„ã€å‚˜ã¯å¿…é ˆã‚„ã§",
                        "æ¿¡ã‚Œã‚‹ã¨ä½“å†·ãˆã‚‹ã—ã€ã‚¿ã‚ªãƒ«æŒã£ã¨ãã¨æ¥½ã‚„",
                        "å±‹å†…ã®é€ƒã’å ´ã¤ãã£ã¨ãã¨å®‰å¿ƒã‚„ã§",
                    ],
                    "cold": [
                        "å†·ãŸã„é›¨ã‚„ã€æ‰‹è¢‹ã¨é˜²æ°´é´ãŒå½¹ç«‹ã¤ã§",
                        "ä½“æ¸©ã‚‚ã£ã¦ã‹ã‚Œã‚„ã™ã„ã€ç„¡ç†ã›ã‚“ã‚ˆã†ã«ãª",
                        "é¢¨ã‚ã‚Œã°åˆç¾½ãŒã ã„ã¶é•ã†ã‚",
                    ],
                },
                "snow": {
                    "hot": [
                        "çã—ã„é›ªã®æ¡ä»¶ã‚„ã€è¶³å…ƒæœ€å„ªå…ˆã§ã„ã“ãª",
                        "æ°—æ¸©ã¯é«˜ã‚ã§ã‚‚é›ªã¯è¦æ³¨æ„ã‚„ã§",
                        "çŠ¶æ³å¤‰ã‚ã‚Šã‚„ã™ã„ã—ã€æ…é‡ã«å‹•ã“",
                    ],
                    "warm": [
                        "ã¿ãã‚Œæ°—å‘³ã§è¶³å…ƒã‚°ã‚ºã‚°ã‚ºã‚„ã€æ°´ã¯ã­æ³¨æ„ãª",
                        "è§£ã‘ã‹ã‘ã§æ»‘ã‚‹ã§ã€æ­©å¹…ã¯å°ã•ã‚ã«ãª",
                        "æ¿¡ã‚Œå†·ãˆã—ã‚„ã™ã„ã—ã€ä½“æ¸©ç®¡ç†ã—ã¦ã“",
                    ],
                    "cool": [
                        "å°é›ªã§ã²ã‚“ã‚„ã‚Šã€è¶³å…ƒæ°—ãƒã¤ã‘ã¦ãª",
                        "è¦–ç•Œç™½ã£ã½ã„ã—ã€æ¨ªæ–­ã¯æ…é‡ã«ã‚„ã§",
                        "é´æ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ã‚ã€æ›¿ãˆé´ä¸‹ã‚ã‚‹ã¨å®‰å¿ƒã‚„",
                    ],
                    "cold": [
                        "å‡çµã“ã‚ã„ã—ã€æ™‚é–“ã«ä½™è£•æŒã£ã¦å‹•ã“",
                        "è»¢å€’æ³¨æ„ã‚„ã€æ»‘ã‚Šã«ãã„é´ã¨æ‰‹è¢‹ã‚’ãª",
                        "æ—¥æ²¡å¾Œã¯å±é™ºåº¦ä¸ŠãŒã‚‹ã—ã€å¯„ã‚Šé“æ§ãˆã‚ã§",
                    ],
                },
            },

            "tohoku": {
                "sunny": {
                    "hot": [
                        "æš‘ã„ã£ã¡ã‚ƒã­ã€æ°´åˆ†ã¨æ—¥é™°ã§ä¼‘ã¿ãªãŒã‚‰ã„ãã¹",
                        "æ—¥å·®ã—ã¤ã‚ˆã„ãŒã‚‰ã€å¸½å­ã¨æ—¥ç„¼ã‘å¯¾ç­–å¤§äº‹ã ã¹",
                        "ç„¡ç†ã™ã‚“ãªã‚ˆã€æ¶¼ã—ã„ã¨ã“ä½¿ã£ã¦ã„ã“ã†",
                    ],
                    "warm": [
                        "ç©ã‚„ã‹ãªæ™´ã‚Œã ã¹ã€ç”¨äº‹é€²ã‚ã‚‹ãªã‚‰ä»Šã ãª",
                        "éã”ã—ã‚„ã™ãã¦ã„ã„æ—¥ã ã­ã€æ´—æ¿¯æ—¥å’Œã ã¹",
                        "å‹•ãã«ã¯ã¡ã‚‡ã†ã©ã„ã„é™½æ°—ã ã£ã¡ã‚ƒ",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ™´ã‚Œã ãªã€ç¾½ç¹”ä¸€æšã‚ã‚‹ã¨ã„ã„ã¹",
                        "æ—¥å·®ã—ã‚ã£ã¦ã‚‚ä½“æ„Ÿã¯ä½ã‚ã ã¹ã€æœã§èª¿æ•´ã—ã‚ˆ",
                        "æœæ™©ã•ã‚€ã„ã‹ã‚‚ã€æ²¹æ–­ã™ã‚“ãªã‚ˆ",
                    ],
                    "cold": [
                        "å¿«æ™´ã§ã‚‚å†·ãˆã‚‹ã£ã¡ã‚ƒã€æ‰‹è¢‹ã‚„ãƒãƒ•ãƒ©ãƒ¼ç”¨æ„ã ã¹",
                        "ç©ºæ°—ã¤ã‚ã¦ã‡ã€é‡ã­ç€ã—ã¦ã‚ã£ãŸã¾ã‚ã†",
                        "æ”¾å°„å†·å´ã§å†·ãˆè¾¼ã¿ã‚„ã™ã„ã‹ã‚‰æ°—ã‚’ã¤ã‘ã¦ãª",
                    ],
                },
                "cloudy": {
                    "hot": [
                        "æ›‡ã£ã¦ã¦ã‚‚è’¸ã™ã¹ã€ã“ã¾ã‚ã«æ°´åˆ†ãª",
                        "æ—¥å·®ã—å¼±ã‚ã§ã‚‚æš‘ã„ã£ã¡ã‚ƒã€ç„¡ç†ã™ã‚“ãªã‚ˆ",
                        "é¢¨é€šã—è‰¯ã„æœè£…ãŒã„ã„ã¹",
                    ],
                    "warm": [
                        "é›²å¤šã‚ã§å‹•ãã‚„ã™ã„æ—¥ã ãªã€ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚ˆã†",
                        "ç†±ã“ã‚‚ã‚Šã«ããã¦æ¥½ã ã¹ã€å¤–å›ã‚Šã‚‚ã—ã‚„ã™ã„",
                        "ç©ã‚„ã‹ãªæ›‡ã‚Šã§ã€ä½œæ¥­ã¯ã‹ã©ã‚‹ã£ã¡ã‚ƒ",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ›‡ã‚Šã€ç¾½ç¹”ä¸€æšã‚ã‚‹ã¨åŠ©ã‹ã‚‹ã¹",
                        "æ—¥å·®ã—ãªã„ã¶ã‚“ä½“æ„Ÿä½ã„ãªã€é¦–å…ƒã‚ã£ãŸã‚ã‚ˆ",
                        "é•·å±…ã¯ã»ã©ã»ã©ã ã¹ãª",
                    ],
                    "cold": [
                        "æ›‡ã‚Šã§åº•å†·ãˆã™ã‚‹ã¹ã€é˜²å¯’ã—ã£ã‹ã‚Šãª",
                        "æ¸©ã‹ã„é£²ã¿ç‰©ã§ä½“ã‚ã£ãŸã‚ã¦ã„ãã¹",
                        "æš—ããªã‚‹ã¨ã„ã£ãã†å¯’ã„ãŒã‚‰ã€æ—©ã‚ã«å¸°ã‚ã†",
                    ],
                },
                "rain": {
                    "hot": [
                        "è’¸ã—é›¨ã ã¹ã€é€šæ°—æ€§ã„ã„ãƒ¬ã‚¤ãƒ³ãŒæ¥½ã ãª",
                        "æ±—ã¨é›¨ã§å†·ãˆã‚„ã™ã„ã£ã¡ã‚ƒã€ã‚¿ã‚ªãƒ«ã¨æ›¿ãˆã‚·ãƒ£ãƒ„æŒã£ã¦ãã¹",
                        "å°é›¨ã®åˆé–“ã¿ã¦å‹•ãã¨ã„ã„ã¹",
                    ],
                    "warm": [
                        "é›¨ã§ã‚‚æ°—æ¸©é«˜ã‚ã€ãƒ ãƒ¬å¯¾ç­–ã—ã¨ãã¨æ¥½ã ã¹",
                        "è·ç‰©ã¯æ’¥æ°´ãŒå®‰å¿ƒã ãªã€å‚˜å¿˜ã‚Œã‚“ãªã‚ˆ",
                        "å‡ºå…¥ã‚Šã§ãƒ ãƒ¯ãƒƒã¨ã™ã‚‹ã‹ã‚‰ã€ä½“èª¿æ°—ã‚’ã¤ã‘ã¦ãª",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šé›¨ã€å‚˜ã¯å¿…é ˆã ã¹",
                        "æ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ãŒã‚‰ã€ã‚¿ã‚ªãƒ«ä¸€æšæŒã£ã¦ãã¨ã„ã„",
                        "å±‹å†…ã®é€ƒã’å ´ã¤ãã£ã¦ãŠãã¨å®‰å¿ƒã ã¹",
                    ],
                    "cold": [
                        "å†·ãŸã„é›¨ã ã¹ã€æ‰‹è¢‹ã¨é˜²æ°´ã®é´ãŒå½¹ç«‹ã¤ãª",
                        "ä½“æ¸©å¥ªã‚ã‚Œã‚„ã™ã„ã£ã¡ã‚ƒã€ç„¡ç†ã—ãªã„ã§ã„ã“ã†",
                        "é¢¨ã‚ã‚‹æ—¥ã¯åˆç¾½ãŒã‚ã‚‹ã¨é•ã†ã¹",
                    ],
                },
                "snow": {
                    "hot": [
                        "ã‚ãšã‚‰ã—ã„é›ªã®æ¡ä»¶ã ã¹ã€è¶³å…ƒæœ€å„ªå…ˆã§ãª",
                        "æ°—æ¸©é«˜ã‚ã§ã‚‚é›ªã¯è¦æ³¨æ„ã ã£ã¡ã‚ƒ",
                        "çŠ¶æ³å¤‰ã‚ã‚Šã‚„ã™ã„ã‹ã‚‰æ…é‡ã«ã„ãã¹",
                    ],
                    "warm": [
                        "ã¿ãã‚Œæ°—å‘³ã§è¶³å…ƒã‚ã‚‹ã„ã€ã¯ã­ã«æ°—ã‚’ã¤ã‘ã¦ãª",
                        "è§£ã‘ã‹ã‘ã§æ»‘ã‚Šã‚„ã™ã„ã£ã¡ã‚ƒã€æ­©å¹…ã¡ã„ã•ã‚ã«",
                        "æ¿¡ã‚Œå†·ãˆã—ã‚„ã™ã„ã‹ã‚‰ä½“æ¸©ç®¡ç†ã—ã£ã‹ã‚Šãª",
                    ],
                    "cool": [
                        "å°é›ªã§ã²ã‚“ã‚„ã‚Šã€è¶³å…ƒæ³¨æ„ã ã¹",
                        "è¦–ç•Œç™½ã£ã½ã„ã‹ã‚‰æ¨ªæ–­ã¯æ…é‡ã«ã„ã“ã†",
                        "é´ãŒæ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ã£ã¡ã‚ƒã€æ›¿ãˆé´ä¸‹ã‚ã‚‹ã¨å®‰å¿ƒã ã¹",
                    ],
                    "cold": [
                        "å‡çµã“ã‚ã„ã¹ã€æ™‚é–“ã«ä½™è£•æŒã£ã¦å‹•ã“ã†",
                        "è»¢å€’æ³¨æ„ã ã£ã¡ã‚ƒã€æ»‘ã‚Šã«ãã„é´ã§ãª",
                        "æ—¥æ²¡å¾Œã¯å±é™ºåº¦ä¸ŠãŒã‚‹ã‹ã‚‰å¯„ã‚Šé“æ§ãˆã‚ã«",
                    ],
                },
            },

            "chugoku": {
                "sunny": {
                    "hot": [
                        "ã‚ˆã†æš‘ã„ã§ã€ã“ã¾ã‚ã«æ°´åˆ†ã¨æ—¥é™°ã§ä¼‘ã¿ã‚“ã•ã„",
                        "æ—¥å·®ã—ãŒãã¤ã„ã‘ã‡ã€å¸½å­ã¨æ—¥ç„¼ã‘å¯¾ç­–ã—ã‚“ã•ã„",
                        "ç„¡ç†ã¯ã›ã‚“ã»ã†ãŒãˆãˆã€æ¶¼ã—ã„ã¨ã“ä½¿ã„ã‚“ã•ã„",
                    ],
                    "warm": [
                        "ãˆãˆæ™´ã‚Œã˜ã‚ƒã€ç”¨äº‹ã¯ã•ãã•ãé€²ã‚€ã§",
                        "éã”ã—ã‚„ã™ã„é™½æ°—ã˜ã‚ƒã‘ã‡ã€æ´—æ¿¯æ—¥å’Œã˜ã‚ƒã®",
                        "å‹•ããªã‚‰ä»ŠãŒã¡ã‚‡ã†ã©ãˆãˆæ™‚é–“ã‚ˆ",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ™´ã‚Œã˜ã‚ƒã€ç¾½ç¹”ãŒä¸€æšã‚ã‚‹ã¨å®‰å¿ƒã‚ˆ",
                        "æ—¥å·®ã—ã‚ã£ã¦ã‚‚ä½“æ„Ÿã¯ä½ã„ã‘ã‡ã€æœã§èª¿æ•´ã—ã‚“ã•ã„",
                        "æœæ™©ã¯å†·ãˆã‚‹ã‘ã‡ã€æ²¹æ–­ã›ã‚“ã‚ˆã†ã«ãª",
                    ],
                    "cold": [
                        "å¿«æ™´ã§ã‚‚å†·ãˆã‚‹ã§ã€æ‰‹è¢‹ã‚„ãƒãƒ•ãƒ©ãƒ¼æŒã£ã¨ãã‚“ã•ã„",
                        "ç©ºæ°—ãŒã¤ã‚ãŸã„ã‘ã‡ã€é‡ã­ç€ã§æ¸©ã‚‚ã‚ã†ã‚„",
                        "æ”¾å°„å†·å´ã§å†·ãˆè¾¼ã¿ã‚„ã™ã„ã‘ã‡æ°—ãƒã¤ã‘ã‚“ã•ã„",
                    ],
                },
                "cloudy": {
                    "hot": [
                        "æ›‡ã£ã¨ã£ã¦ã‚‚è’¸ã—æš‘ã„ã§ã€ã“ã¾ã‚ã«æ°´åˆ†ãª",
                        "æ—¥å·®ã—å¼±ã†ã¦ã‚‚æš‘ã„ã‘ã‡ã€ç„¡ç†ã›ã‚“ã‚ˆã†ã«",
                        "é¢¨é€šã—ã®ãˆãˆæœè£…ã§è¡Œãã‚“ã•ã„",
                    ],
                    "warm": [
                        "é›²å¤šã‚ã§å‹•ãã‚„ã™ã„ã‚ã€ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚“ã•ã„",
                        "ç†±ã“ã‚‚ã‚Šã«ãã†ã¦æ¥½ã˜ã‚ƒã‚ã€å¤–å›ã‚Šã‚‚ã—ã‚„ã™ã„ã§",
                        "ç©ã‚„ã‹ãªæ›‡ã‚Šã§ä½œæ¥­ã¯ã‹ã©ã‚‹ã®ã†",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ›‡ã‚Šã˜ã‚ƒã€ç¾½ç¹”ä¸€æšã‚ã‚‹ã¨åŠ©ã‹ã‚‹ã§",
                        "æ—¥å·®ã—ãªã„ã¶ã‚“ä½“æ„Ÿä½ã„ã‘ã‡ã€é¦–å…ƒæ¸©ã‚ã‚“ã•ã„",
                        "é•·å±…ã¯ã»ã©ã»ã©ãŒãˆãˆã§",
                    ],
                    "cold": [
                        "æ›‡ã‚Šã§åº•å†·ãˆã™ã‚‹ã‚ã€é˜²å¯’ã—ã£ã‹ã‚Šã—ã‚“ã•ã„",
                        "æ¸©ã‹ã„é£²ã¿ã‚‚ã‚“ã§ä½“ã‚’æ¸©ã‚ã‚“ã•ã„",
                        "æš—ã†ãªã‚‹ã¨ä¸€æ®µã¨å¯’ã„ã‘ã‡ã€æ—©ã‚ã«å¸°ã‚Šã‚“ã•ã„",
                    ],
                },
                "rain": {
                    "hot": [
                        "è’¸ã—é›¨ã˜ã‚ƒã€é€šæ°—æ€§ãˆãˆãƒ¬ã‚¤ãƒ³ãŒæ¥½ã‚ˆ",
                        "æ±—ã¨é›¨ã§å†·ãˆã‚„ã™ã„ã‘ã‡ã€ã‚¿ã‚ªãƒ«ã¨æ›¿ãˆã‚·ãƒ£ãƒ„ã‚ã‚‹ã¨å®‰å¿ƒã˜ã‚ƒ",
                        "å°é›¨ã®åˆé–“ã‚’ä¸Šæ‰‹ã«ä½¿ã„ã‚“ã•ã„",
                    ],
                    "warm": [
                        "é›¨ã§ã‚‚æ°—æ¸©ã¯é«˜ã‚ã˜ã‚ƒã€ãƒ ãƒ¬å¯¾ç­–ã—ã‚“ã•ã„",
                        "è·ç‰©ã¯æ’¥æ°´ãŒå®‰å¿ƒã‚ˆã€å‚˜ã‚‚å¿˜ã‚Œã‚“ã•ã‚“ãª",
                        "å‡ºå…¥ã‚Šã§ãƒ ãƒ¯ãƒƒã¨ã™ã‚‹ã‘ã‡ã€ä½“èª¿ã«æ°—ãƒã¤ã‘ã‚“ã•ã„",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šé›¨ã˜ã‚ƒã€å‚˜ã¯å¿…é ˆã‚ˆ",
                        "æ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ã‘ã‡ã€ã‚¿ã‚ªãƒ«ä¸€æšæŒã£ã¨ãã¨ãˆãˆ",
                        "å±‹å†…ã®é€ƒã’å ´ã¤ãã£ã¨ãã¨å®‰å¿ƒã˜ã‚ƒ",
                    ],
                    "cold": [
                        "å†·ãŸã„é›¨ã˜ã‚ƒã€æ‰‹è¢‹ã¨é˜²æ°´é´ãŒå½¹ç«‹ã¤ã§",
                        "ä½“æ¸©ã‚‚ã£ã¦ã„ã‹ã‚Œã‚„ã™ã„ã‘ã‡ã€ç„¡ç†ã›ã‚“ã®ãŒãˆãˆ",
                        "é¢¨ã‚ã‚‹æ—¥ã¯åˆç¾½ãŒã‚ã‚‹ã¨é•ã†ã‘ã‡ã®",
                    ],
                },
                "snow": {
                    "hot": [
                        "çã—ã„é›ªã®æ¡ä»¶ã˜ã‚ƒã€è¶³å…ƒæœ€å„ªå…ˆã§è¡Œãã‚“ã•ã„",
                        "æ°—æ¸©é«˜ã‚ã§ã‚‚é›ªã¯è¦æ³¨æ„ã‚ˆ",
                        "çŠ¶æ³å¤‰ã‚ã‚Šã‚„ã™ã„ã‘ã‡ã€æ…é‡ã«ãª",
                    ],
                    "warm": [
                        "ã¿ãã‚Œæ°—å‘³ã§è¶³å…ƒæ‚ªã„ã‘ã‡ã€æ°´ã¯ã­æ³¨æ„ã—ã‚“ã•ã„",
                        "è§£ã‘ã‹ã‘ã§æ»‘ã‚Šã‚„ã™ã„ã‘ã‡ã€æ­©å¹…ã¯å°ã•ã‚ã«ãª",
                        "æ¿¡ã‚Œå†·ãˆã—ã‚„ã™ã„ã‘ã‡ã€ä½“æ¸©ç®¡ç†ã—ã‚“ã•ã„",
                    ],
                    "cool": [
                        "å°é›ªã¾ã˜ã‚Šã§ã²ã‚“ã‚„ã‚Šã˜ã‚ƒã€è¶³å…ƒæ°—ãƒã¤ã‘ã‚“ã•ã„",
                        "è¦–ç•Œç™½ã†ãªã‚‹ã‘ã‡ã€æ¨ªæ–­ã¯æ…é‡ã«ã®",
                        "é´ãŒæ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ã‘ã‡ã€æ›¿ãˆé´ä¸‹ã‚ã‚‹ã¨å®‰å¿ƒã‚ˆ",
                    ],
                    "cold": [
                        "å‡çµãŒæ€–ã„ã‘ã‡ã€æ™‚é–“ã«ä½™è£•æŒã£ã¦å‹•ãã‚“ã•ã„",
                        "è»¢å€’æ³¨æ„ã˜ã‚ƒã€æ»‘ã‚Šã«ãã„é´ã¨æ‰‹è¢‹ã§ãª",
                        "æ—¥æ²¡å¾Œã¯å±é™ºåº¦ä¸ŠãŒã‚‹ã‘ã‡ã€å¯„ã‚Šé“æ§ãˆã‚ãŒãˆãˆ",
                    ],
                },
            },

            "kyushu": {
                "sunny": {
                    "hot": [
                        "ã‚ã£ã¡ã‚ƒæš‘ã‹ã­ã€æ°´åˆ†ã¨æ—¥é™°ä¼‘æ†©ã°å¿˜ã‚Œã‚“ã”ã¨ã­",
                        "æ—¥å·®ã—å¼·ã‹ã‘ã‚“ã€å¸½å­ã¨æ—¥ç„¼ã‘å¯¾ç­–ã‚‚ã—ã¨ã£ãŸãŒã‚ˆã‹ã‚ˆ",
                        "ç„¡ç†ã›ã‚“ã§ã€æ¶¼ã—ã‹æ‰€ã†ã¾ãä½¿ã†ã¨ã‚ˆã‹ã°ã„",
                    ],
                    "warm": [
                        "æ°—æŒã¡ã‚ˆã‹æ™´ã‚ŒãŸã„ã€ç”¨äº‹ãŒã¯ã‹ã©ã‚‹ã­",
                        "éã”ã—ã‚„ã™ã‹é™½æ°—ã‚„ã‘ã‚“ã€æ´—æ¿¯æ—¥å’ŒãŸã„",
                        "å‹•ããªã‚‰ä»ŠãŒã¡ã‚‡ã†ã©ã‚ˆã‹ã­",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ™´ã‚Œã‚„ã‘ã‚“ã€ç¾½ç¹”ä¸€æšã‚ã‚‹ã¨å®‰å¿ƒãŸã„",
                        "æ—¥å·®ã—ã‚ã£ã¦ã‚‚ä½“æ„Ÿã¯ä½ã‚ã‚„ã‘ã‚“ã€æœã§èª¿æ•´ã—ã‚ˆ",
                        "æœæ™©ã¯å†·ãˆã‚‹ã‘ã‚“ã€æ²¹æ–­ã›ã‚“ã”ã¨",
                    ],
                    "cold": [
                        "å¿«æ™´ã§ã‚‚å†·ãˆã‚‹ã°ã„ã€æ‰‹è¢‹ã‚„ãƒãƒ•ãƒ©ãƒ¼ãŒå½¹ç«‹ã¤ãŸã„",
                        "ç©ºæ°—ãŒã¤ã‚ãŸã‹ã€é‡ã­ç€ã—ã¦æ¸©ã‚‚ã‚ã†ã­",
                        "æ”¾å°„å†·å´ã§å†·ãˆè¾¼ã¿ã‚„ã™ã‹ã‘ã‚“ã€æ°—ã‚’ã¤ã‘ã‚“ã­",
                    ],
                },
                "cloudy": {
                    "hot": [
                        "æ›‡ã£ã¨ã£ã¦ã‚‚è’¸ã—æš‘ã‹ã€ã“ã¾ã‚ã«æ°´åˆ†ã°ã„",
                        "æ—¥å·®ã—å¼±ã†ã¦ã‚‚æš‘ã‹ã‘ã‚“ã€ç„¡ç†ã¯ç¦ç‰©ãŸã„",
                        "é¢¨é€šã—ã®ã‚ˆã‹æœè£…ã§ã„ã“",
                    ],
                    "warm": [
                        "é›²å¤šã‚ã§å‹•ãã‚„ã™ã‹ã€ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚ˆ",
                        "ç†±ã“ã‚‚ã‚Šã«ããã¦æ¥½ãŸã„ã€å¤–å›ã‚Šã‚‚ã—ã‚„ã™ã‹ã­",
                        "ç©ã‚„ã‹ãªæ›‡ã‚Šã§ä½œæ¥­ã¯ã‹ã©ã‚‹ã°ã„",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šæ›‡ã‚Šã‚„ã‘ã‚“ã€ç¾½ç¹”ä¸€æšã‚ã‚‹ã¨ã‚ˆã‹ã‚ˆ",
                        "æ—¥å·®ã—ãªã„ã¶ã‚“ä½“æ„Ÿä½ã‹ã€é¦–å…ƒæ¸©ã‚ã‚‹ã¨æ¥½ãŸã„",
                        "é•·å±…ã¯ã»ã©ã»ã©ã«ã—ã¨ã“",
                    ],
                    "cold": [
                        "æ›‡ã‚Šã§åº•å†·ãˆã™ã‚‹ã°ã„ã€é˜²å¯’ã—ã£ã‹ã‚Šã­",
                        "æ¸©ã‹ã„é£²ã¿ç‰©ã§ä½“ã°æ¸©ã‚ã¦ã„ã“ã†",
                        "æš—ã†ãªã‚‹ã¨ä¸€æ®µã¨å¯’ã‹ã‘ã‚“ã€æ—©ã‚ã«å¸°ã‚",
                    ],
                },
                "rain": {
                    "hot": [
                        "è’¸ã—é›¨ãŸã„ã€é€šæ°—æ€§ã®ã‚ˆã‹ãƒ¬ã‚¤ãƒ³ãŒæ¥½ã°ã„",
                        "æ±—ã¨é›¨ã§å†·ãˆã‚„ã™ã‹ã‘ã‚“ã€ã‚¿ã‚ªãƒ«ã¨æ›¿ãˆã‚·ãƒ£ãƒ„ã‚ã‚‹ã¨å®‰å¿ƒãŸã„",
                        "å°é›¨ã®åˆé–“ã°ä¸Šæ‰‹ã«ä½¿ãŠã†ã­",
                    ],
                    "warm": [
                        "é›¨ã§ã‚‚æ°—æ¸©ã¯é«˜ã‚ãŸã„ã€ãƒ ãƒ¬å¯¾ç­–ã—ã¨ãã¨ã‚ˆã‹ã‚ˆ",
                        "è·ç‰©ã¯æ’¥æ°´ãŒå®‰å¿ƒã‚„ã‘ã‚“ã€å‚˜ã‚‚å¿˜ã‚Œã‚“ã”ã¨",
                        "å‡ºå…¥ã‚Šã§ãƒ ãƒ¯ãƒƒã¨ã™ã‚‹ã‘ã‚“ã€ä½“èª¿ã«æ°—ã‚’ã¤ã‘ã¦ã­",
                    ],
                    "cool": [
                        "ã²ã‚“ã‚„ã‚Šé›¨ã‚„ã‘ã‚“ã€å‚˜ã¯å¿…é ˆãŸã„",
                        "æ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ã‘ã‚“ã€ã‚¿ã‚ªãƒ«ä¸€æšã‚ã‚‹ã¨åŠ©ã‹ã‚‹ã°ã„",
                        "å±‹å†…ã®é€ƒã’å ´ã¤ãã£ã¨ãã¨å®‰å¿ƒãŸã„",
                    ],
                    "cold": [
                        "å†·ãŸã„é›¨ã°ã„ã€æ‰‹è¢‹ã¨é˜²æ°´é´ãŒå½¹ç«‹ã¤ã‚ˆ",
                        "ä½“æ¸©æŒã£ã¦ã„ã‹ã‚Œã‚„ã™ã‹ã‘ã‚“ã€ç„¡ç†ã›ã‚“ã”ã¨",
                        "é¢¨ã‚ã‚‹æ—¥ã¯åˆç¾½ãŒã‚ã‚‹ã¨é•ã†ãŸã„",
                    ],
                },
                "snow": {
                    "hot": [
                        "çã—ã‹é›ªã®æ¡ä»¶ã‚„ã‘ã‚“ã€è¶³å…ƒæœ€å„ªå…ˆãŸã„",
                        "æ°—æ¸©é«˜ã‚ã§ã‚‚é›ªã¯è¦æ³¨æ„ã°ã„",
                        "çŠ¶æ³å¤‰ã‚ã‚Šã‚„ã™ã‹ã‘ã‚“ã€æ…é‡ã«å‹•ã“",
                    ],
                    "warm": [
                        "ã¿ãã‚Œæ°—å‘³ã§è¶³å…ƒã‚ã‚‹ã‹ã­ã€æ°´ã¯ã­æ³¨æ„ãŸã„",
                        "è§£ã‘ã‹ã‘ã§æ»‘ã‚Šã‚„ã™ã‹ã‘ã‚“ã€æ­©å¹…ã¯å°ã•ã‚ã§",
                        "æ¿¡ã‚Œå†·ãˆã—ã‚„ã™ã‹ã‘ã‚“ã€ä½“æ¸©ç®¡ç†ã—ã¨ã“ã†",
                    ],
                    "cool": [
                        "å°é›ªã§ã²ã‚“ã‚„ã‚ŠãŸã„ã€è¶³å…ƒæ°—ã‚’ã¤ã‘ã‚“ã­",
                        "è¦–ç•ŒãŒç™½ã£ã½ã‹ã‘ã‚“ã€æ¨ªæ–­ã¯æ…é‡ã«",
                        "é´ãŒæ¿¡ã‚Œã‚‹ã¨å†·ãˆã‚‹ãŸã„ã€æ›¿ãˆé´ä¸‹ã‚ã‚‹ã¨å®‰å¿ƒã°ã„",
                    ],
                    "cold": [
                        "å‡çµãŒæ€–ã‹ã€æ™‚é–“ã«ä½™è£•æŒã£ã¦å‹•ã“ã†ã­",
                        "è»¢å€’æ³¨æ„ã‚„ã‘ã‚“ã€æ»‘ã‚Šã«ãã„é´ã¨æ‰‹è¢‹ã§",
                        "æ—¥æ²¡å¾Œã¯å±é™ºåº¦ä¸ŠãŒã‚‹ã‘ã‚“ã€å¯„ã‚Šé“æ§ãˆã‚ãŒã‚ˆã‹",
                    ],
                },
            },
        }

    def _build_tails(self):
        return {
            "kanto": {
                "morning": [
                    "æœã®ã†ã¡ã«å‹•ã‘ã‚‹ã“ã¨ã‚’é€²ã‚ã‚ˆã†",
                    "é€šå‹¤å‰ã«æº–å‚™ã‚’æ•´ãˆã¦ãŠã“ã†",
                    "æœã¯ç„¡ç†ã›ãšä½“ã‚’æ…£ã‚‰ã—ã¦ã„ã“ã†",
                ],
                "day": [
                    "æ—¥ä¸­ã¯ã“ã¾ã‚ã«ä¼‘æ†©ã­",
                    "å¤–ã®ç”¨äº‹ã¯ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚ˆã†",
                    "æ˜¼ã¯æ°´åˆ†ã¨å°ä¼‘æ­¢ã‚’æ„è­˜ã—ã¦",
                ],
                "evening": [
                    "å¤•æ–¹ã¯æ—©ã‚ã«åˆ‡ã‚Šä¸Šã’ã‚‹ã¨å®‰å¿ƒã ã‚ˆ",
                    "æ—¥æ²¡å‰ã«ç§»å‹•ã‚’çµ‚ãˆã‚ˆã†",
                    "å¤•æ–¹ã¯æ··ã¿ã‚„ã™ã„ã‹ã‚‰ä½™è£•ã‚’æŒã£ã¦ã­",
                ],
                "night": [
                    "å¤œã¯è¦‹é€šã—ãŒæ‚ªã„ã‹ã‚‰å®‰å…¨ç¬¬ä¸€ã§",
                    "å¸°ã‚Šé“ã¯è¶³å…ƒã¨è»Šã«æ³¨æ„ã—ã¦ã­",
                    "å¤œã¯å†·ãˆã‚„ã™ã„ã‹ã‚‰æ—©ã‚ã«å¸°ã‚ã†",
                ],
            },
            "kansai": {
                "morning": [
                    "æœã®ã†ã¡ã«ã‚µã‚µãƒƒã¨é€²ã‚ã‚ˆã‹",
                    "é€šå‹¤å‰ã«æº–å‚™ã ã‘æ•´ãˆã¨ã“",
                    "æœã¯ç„¡ç†ã›ã‚“ã¨ä½“æ…£ã‚‰ã—ã¦ã„ã“",
                ],
                "day": [
                    "æ—¥ä¸­ã¯ã“ã¾ã‚ã«ä¼‘æ†©ãª",
                    "å¤–ã®ç”¨äº‹ã¯ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚ˆ",
                    "æ˜¼ã¯æ°´åˆ†ã¨å°ä¼‘æ­¢ã‚ã™ã‚Œã‚“ã¨ã„ã¦",
                ],
                "evening": [
                    "å¤•æ–¹ã¯æ—©ã‚ã«åˆ‡ã‚Šä¸Šã’ã‚‹ã‚“ãŒå®‰å¿ƒã‚„ã§",
                    "æ—¥æ²¡å‰ã«ç§»å‹•ã¯çµ‚ã‚ã‚‰ã›ã¨ã“",
                    "å¤•æ–¹ã¯æ··ã¿ãŒã¡ã‚„ã—ã€ä½™è£•æŒã£ã¦ãª",
                ],
                "night": [
                    "å¤œã¯è¦‹é€šã—æ‚ªã„ã—å®‰å…¨ç¬¬ä¸€ã§ãª",
                    "å¸°ã‚Šé“ã¯è¶³å…ƒã¨è»Šã«æ°—ãƒã¤ã‘ã¦ã‚„",
                    "å¤œã¯å†·ãˆã‚„ã™ã„ã—ã€æ—©ã‚ã«å¸°ã‚ã‹",
                ],
            },
            "tohoku": {
                "morning": [
                    "æœã®ã†ã¡ã«ã§ãã‚‹ã“ã¨é€²ã‚ã£ãº",
                    "é€šå‹¤å‰ã«æº–å‚™ã¨ã¨ã®ãˆã‚ˆã†ãª",
                    "æœã¯ç„¡ç†ã—ã­ã§ä½“æ…£ã‚‰ã—ã¦ã„ã“ã†",
                ],
                "day": [
                    "æ—¥ä¸­ã¯ã“ã¾ã‚ã«ä¼‘æ†©ã™ã£ãº",
                    "å¤–ã®ç”¨äº‹ã¯ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚ˆã†",
                    "æ˜¼ã¯æ°´åˆ†ã¨å°ä¼‘æ­¢ã„ã‚Œã£ãº",
                ],
                "evening": [
                    "å¤•æ–¹ã¯æ—©ã‚ã«åˆ‡ã‚Šä¸Šã’ã‚‹ã¨å®‰å¿ƒã ã¹",
                    "æ—¥æ²¡å‰ã«ç§»å‹•çµ‚ã‚ã‚‰ã›ã‚ˆã†ãª",
                    "å¤•æ–¹ã¯æ··ã¿ãŒã¡ã ãŒã‚‰ä½™è£•æŒã£ã¦ãª",
                ],
                "night": [
                    "å¤œã¯è¦‹é€šã—æ‚ªã„ã‹ã‚‰å®‰å…¨ç¬¬ä¸€ã ã¹",
                    "å¸°ã‚Šé“ã¯è¶³å…ƒã¨è»Šã•æ³¨æ„ã—ã¦ãª",
                    "å¤œã¯å†·ãˆã‚„ã™ã„ãŒã‚‰æ—©ã‚ã«å¸°ã‚ã†",
                ],
            },
            "chugoku": {
                "morning": [
                    "æœã®ã†ã¡ã«ã§ãã‚‹ã“ã¨é€²ã‚ã‚“ã•ã„",
                    "é€šå‹¤å‰ã«æº–å‚™ã‚’æ•´ãˆã‚“ã•ã„",
                    "æœã¯ç„¡ç†ã›ã‚“ã¨ä½“æ…£ã‚‰ã—ã¦ã„ã“",
                ],
                "day": [
                    "æ—¥ä¸­ã¯ã“ã¾ã‚ã«ä¼‘æ†©ã—ã‚“ã•ã„",
                    "å¤–ã®ç”¨äº‹ã¯ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚“ã•ã„",
                    "æ˜¼ã¯æ°´åˆ†ã¨å°ä¼‘æ­¢ã‚’æ„è­˜ã—ã‚“ã•ã„",
                ],
                "evening": [
                    "å¤•æ–¹ã¯æ—©ã‚ã«åˆ‡ã‚Šä¸Šã’ã‚‹ã‚“ãŒå®‰å¿ƒã‚ˆ",
                    "æ—¥æ²¡å‰ã«ç§»å‹•ã‚’çµ‚ãˆã‚“ã•ã„",
                    "å¤•æ–¹ã¯æ··ã¿ã‚„ã™ã„ã‘ã‡ä½™è£•ã‚’æŒã£ã¦ã®",
                ],
                "night": [
                    "å¤œã¯è¦‹é€šã—æ‚ªã„ã‘ã‡å®‰å…¨ç¬¬ä¸€ã§",
                    "å¸°ã‚Šé“ã¯è¶³å…ƒã¨è»Šã«æ°—ãƒã¤ã‘ã‚“ã•ã„",
                    "å¤œã¯å†·ãˆã‚„ã™ã„ã‘ã‡æ—©ã‚ã«å¸°ã‚Šã‚“ã•ã„",
                ],
            },
            "kyushu": {
                "morning": [
                    "æœã®ã†ã¡ã«ã§ãã‚‹ã“ã¨é€²ã‚ã¨ã“",
                    "é€šå‹¤å‰ã«æº–å‚™ã°æ•´ãˆã¨ã“ã†",
                    "æœã¯ç„¡ç†ã›ã‚“ã§ä½“æ…£ã‚‰ã—ã¦ã„ã“",
                ],
                "day": [
                    "æ—¥ä¸­ã¯ã“ã¾ã‚ã«ä¼‘æ†©ã—ã¨ã“ã†ã­",
                    "å¤–ã®ç”¨äº‹ã¯ä»Šã®ã†ã¡ã«ç‰‡ä»˜ã‘ã‚ˆã†",
                    "æ˜¼ã¯æ°´åˆ†ã¨å°ä¼‘æ­¢ã€å¿˜ã‚Œã‚“ã”ã¨ã­",
                ],
                "evening": [
                    "å¤•æ–¹ã¯æ—©ã‚ã«åˆ‡ã‚Šä¸Šã’ãŸæ–¹ãŒå®‰å¿ƒãŸã„",
                    "æ—¥æ²¡å‰ã«ç§»å‹•ã¯æ¸ˆã¾ã›ã¨ã“ã†",
                    "å¤•æ–¹ã¯æ··ã¿ã‚„ã™ã‹ã‘ã‚“ã€ä½™è£•æŒã£ã¦å‹•ã“",
                ],
                "night": [
                    "å¤œã¯è¦‹é€šã—æ‚ªã‹ã‘ã‚“å®‰å…¨ç¬¬ä¸€ãŸã„",
                    "å¸°ã‚Šé“ã¯è¶³å…ƒã¨è»Šã«æ°—ã‚’ã¤ã‘ã‚“ã­",
                    "å¤œã¯å†·ãˆã‚„ã™ã‹ã‘ã‚“æ—©ã‚ã«å¸°ã‚",
                ],
            },
        }

# ---------- è¡¨ç¤º ----------
def build_embed(place: dict, rows: list[dict]) -> discord.Embed:
    loc = place['name']; admin = place.get('admin1') or ''; country = place.get('country') or ''
    title = f"{loc}ï¼ˆ{admin + 'ãƒ»' if admin else ''}{country}ï¼‰".strip("ï¼ˆï¼‰")
    embed = discord.Embed(title=f"ç›´è¿‘3æ™‚é–“ã®å¤©æ°— | {title}", color=0x4C7CF3)
    lines=[]
    for r in rows:
        t=r['time']; emoji=pick_emoji(r['weathercode'])
        wind = r.get("wind", 0.0)
        lines.append(
            f"**{t.strftime('%H:%M')}** {emoji}  æ°—æ¸© **{r['temp']:.1f}Â°C**  "
            f"é™æ°´ç¢ºç‡ **{r['pop']}%**  é™æ°´é‡ **{r['precip']:.1f}mm**  é¢¨é€Ÿ **{wind:.1f}m/s**"
        )
    embed.description="\n".join(lines)
    ts=datetime.now(JST).strftime('%Y-%m-%d %H:%M')
    embed.set_footer(text=f"æ›´æ–°: {ts} JST â€¢ Powered by Open-Meteo")
    return embed

# ---------- Core ----------
async def get_next_3_hours(session: aiohttp.ClientSession, place_query: str):
    geo = await geocode(session, place_query)
    if not geo:
        return None, None, "å ´æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚åˆ¥ã®è¡¨è¨˜ã§ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã­ã€‚"
    data = await fetch_forecast(session, geo["latitude"], geo["longitude"], geo["timezone"])
    if not data or "hourly" not in data:
        return geo, None, "å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"

    times = data["hourly"]["time"]
    temps = data["hourly"]["temperature_2m"]
    pops  = data["hourly"].get("precipitation_probability", [0]*len(times))
    precs = data["hourly"].get("precipitation", [0.0]*len(times))
    codes = data["hourly"].get("weathercode", [0]*len(times))
    winds = data["hourly"].get("windspeed_10m", [0.0]*len(times))

    now = datetime.now(JST)
    rows=[]
    for i, ts in enumerate(times):
        try:
            t = datetime.fromisoformat(ts.replace("Z", "+00:00")).astimezone(JST)
        except Exception:
            continue
        if t >= now and len(rows) < 3:
            rows.append({
                "time": t,
                "temp": float(temps[i]),
                "pop": int(pops[i]) if i < len(pops) and pops[i] is not None else 0,
                "precip": float(precs[i]) if i < len(precs) and precs[i] is not None else 0.0,
                "weathercode": int(codes[i]) if i < len(codes) and codes[i] is not None else 0,
                "wind": float(winds[i]) if i < len(winds) and winds[i] is not None else 0.0,
            })
        if len(rows) == 3:
            break
    if not rows:
        return geo, None, "ç›´è¿‘3æ™‚é–“ã®ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
    return geo, rows, None

# ---------- Message handling ----------
MENTION_PATTERN = re.compile(r"<@!?(\d+)>")

def extract_query_from_message(content: str, bot_id: int) -> str | None:
    m = MENTION_PATTERN.search(content)
    if not m: return None
    if int(m.group(1)) != bot_id: return None
    rest = MENTION_PATTERN.sub("", content, count=1).strip()
    return rest or None

engine = CommentEngine()

def build_comment(rows: list[dict], place: dict) -> str:
    weather_key = categorize_weather(rows)    # sunny/cloudy/rain/snow
    temp_key    = categorize_temp(rows)       # hot/warm/cool/cold
    time_key    = categorize_time(rows)       # morning/day/evening/night
    dialect     = pick_dialect_key(place)     # kanto/kansai/tohoku/chugoku/kyushu
    has_thunder = any(r["weathercode"] in (95,96,99) for r in rows)
    return engine.get(dialect, weather_key, temp_key, time_key, has_thunder)

@client.event
async def on_ready():
    print(f"Bot version: {BOT_VERSION}")
    print(f"Logged in as {client.user} (ID: {client.user.id})")
    print("------")

@client.event
async def on_message(message: discord.Message):
    if message.author.bot:
        return
    query = extract_query_from_message(message.content, client.user.id)
    if not query:
        return
    async with message.channel.typing():
        async with aiohttp.ClientSession() as session:
            place, rows, err = await get_next_3_hours(session, query)
            if err:
                await message.reply(ensure_aa(err), mention_author=False); return
            embed = build_embed(place, rows)
            try:
                comment = build_comment(rows, place)
            except Exception as e:
                print(f"[WARN] comment build failed: {e}")
                comment = ensure_aa("ä»Šæ—¥ã¯ç„¡ç†ã›ãšã€å®‰å…¨ç¬¬ä¸€ã§ã„ã“ã†")
            await message.reply(content=comment, embed=embed, mention_author=False)

@client.tree.command(name="weather", description="åœ°åãƒ»ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯åã‹ã‚‰ç›´è¿‘3æ™‚é–“ã®å¤©æ°—ã‚’è¡¨ç¤ºã—ã¾ã™")
@app_commands.describe(location="åœ°å/ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ï¼ˆä¾‹ï¼šå¤§é˜ª, USJ, æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰ï¼‰")
async def weather(interaction: discord.Interaction, location: str):
    await interaction.response.defer(thinking=True)
    async with aiohttp.ClientSession() as session:
        place, rows, err = await get_next_3_hours(session, location)
        if err:
            await interaction.followup.send(ensure_aa(err), ephemeral=True); return
        embed = build_embed(place, rows)
        try:
            comment = build_comment(rows, place)
        except Exception as e:
            print(f"[WARN] comment build failed: {e}")
            comment = ensure_aa("ä»Šæ—¥ã¯ç„¡ç†ã›ãšã€å®‰å…¨ç¬¬ä¸€ã§ã„ã“ã†")
        await interaction.followup.send(content=comment, embed=embed)

def main():
    if not BOT_TOKEN:
        raise RuntimeError("ç’°å¢ƒå¤‰æ•° DISCORD_BOT_TOKEN ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚")
    client.run(BOT_TOKEN)

if __name__ == "__main__":
    main()
